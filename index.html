<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Recibo NFC-e – Hayama Sushi</title>
<link rel="stylesheet" href="style.css">
</head>
<body>

<div class="container">
    <h2>Gerar Recibo – Retirada</h2>

    <label>Nome do cliente</label>
    <input id="nomeCliente" placeholder="Ex: João Silva">

    <label>Item</label>
    <input id="item" placeholder="Ex: Sushi Salmão">

    <label>Quantidade</label>
    <input id="qtd" type="number" value="1" min="1">

    <label>Valor unitário</label>
    <input id="valor" type="number" step="0.01" placeholder="Ex: 25.00">

    <button onclick="adicionar()">Adicionar item</button>

    <table id="tabelaItens">
        <tr>
            <th>QTD</th>
            <th>ITEM</th>
            <th>VALOR</th>
        </tr>
    </table>

    <p class="total" id="totalTela">TOTAL: R$ 0,00</p>

    <button onclick="gerarRecibo()">IMPRIMIR NFC-e</button>
</div>

<!-- RECIBO PARA IMPRESSÃO -->
<div id="recibo" class="reciboPrint">
    <h1>RETIRADA</h1>

    <p id="nomeRecibo"></p>
    <p id="dataHoraRecibo"></p>

    <table id="tabelaRecibo">
        <tr>
            <th>QTD</th>
            <th>ITEM</th>
            <th>VALOR</th>
        </tr>
    </table>

    <p class="total" id="totalRecibo"></p>

    <p class="agradecimento">Obrigado pela preferência</p>

    <div class="espaco-corte"></div>
</div>

<script>
let total = 0;

function adicionar() {
    const item = document.getElementById("item").value.trim();
    const qtd = Number(document.getElementById("qtd").value);
    const valor = Number(document.getElementById("valor").value);

    if (!item || qtd <= 0 || valor <= 0) {
        alert("Preencha todos os campos corretamente");
        return;
    }

    const subtotal = qtd * valor;
    total += subtotal;

    const tabela = document.getElementById("tabelaItens");
    const linha = tabela.insertRow();
    linha.insertCell(0).innerText = qtd;
    linha.insertCell(1).innerText = item;
    linha.insertCell(2).innerText = subtotal.toFixed(2);

    document.getElementById("totalTela").innerText =
        "TOTAL: R$ " + total.toFixed(2);

    document.getElementById("item").value = "";
    document.getElementById("qtd").value = 1;
    document.getElementById("valor").value = "";
}

function gerarRecibo() {
    const nome = document.getElementById("nomeCliente").value.trim();
    if (!nome) {
        alert("Informe o nome do cliente");
        return;
    }

    document.getElementById("nomeRecibo").innerText = "Cliente: " + nome;

    const now = new Date();
    const dataHora =
        String(now.getDate()).padStart(2, "0") + "/" +
        String(now.getMonth() + 1).padStart(2, "0") + "/" +
        now.getFullYear() + " " +
        String(now.getHours()).padStart(2, "0") + ":" +
        String(now.getMinutes()).padStart(2, "0");

    document.getElementById("dataHoraRecibo").innerText =
        "Data: " + dataHora;

    const tabelaOrig = document.getElementById("tabelaItens");
    const tabelaRecibo = document.getElementById("tabelaRecibo");

    tabelaRecibo.innerHTML =
        "<tr><th>QTD</th><th>ITEM</th><th>VALOR</th></tr>";

    for (let i = 1; i < tabelaOrig.rows.length; i++) {
        const o = tabelaOrig.rows[i];
        const l = tabelaRecibo.insertRow();
        l.insertCell(0).innerText = o.cells[0].innerText;
        l.insertCell(1).innerText = o.cells[1].innerText;
        l.insertCell(2).innerText = o.cells[2].innerText;
    }

    document.getElementById("totalRecibo").innerText =
        "TOTAL: R$ " + total.toFixed(2);

    window.print();
}
</script>

</body>
</html>
